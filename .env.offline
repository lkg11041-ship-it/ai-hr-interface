# ============================================================================
# 폐쇄망 환경 설정 파일 (.env.offline)
# ============================================================================
#
# 이 파일은 폐쇄망(Air-Gapped) 환경에서 Airflow를 배포하기 위한 설정입니다.
# Oracle → PostgreSQL ETL 기능만 사용합니다.
#
# 사용 방법:
#   1. 이 파일을 .env로 복사: cp .env.offline .env
#   2. 아래 설정값들을 실제 환경에 맞게 수정
#   3. docker-compose.offline.yml로 배포
#
# ============================================================================

# ============================================================================
# 기본 설정
# ============================================================================
RUN_MODE=offline
TZ=Asia/Seoul

# ============================================================================
# Airflow 관리자 계정 설정
# ============================================================================
# Airflow 웹 UI 접속 계정
# 웹 브라우저에서 http://<서버IP>:8081 로 접속 시 사용
AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASSWORD=admin

# Airflow 웹 UI 포트 (기본값: 8081)
AIRFLOW_PORT=8081

# ============================================================================
# PostgreSQL 데이터베이스 설정 (필수)
# ============================================================================
# PostgreSQL은 다음 두 가지 용도로 사용됩니다:
#   1. Airflow 메타데이터 저장 (DAG 실행 이력, 스케줄 정보 등)
#   2. Oracle에서 추출한 채용 데이터 저장 (ETL 타겟 DB)
#
# 🔧 설정 방법:
#   - POSTGRES_HOST: PostgreSQL 서버 IP 주소 (예: 10.0.0.11)
#   - POSTGRES_PORT: PostgreSQL 포트 (기본값: 5432)
#   - POSTGRES_DB: 데이터베이스 이름 (기본값: recruit)
#   - POSTGRES_USER: 접속 계정
#   - POSTGRES_PASSWORD: 접속 비밀번호
#
# 📋 사전 준비사항:
#   1. PostgreSQL 서버에 recruit 데이터베이스 생성
#      CREATE DATABASE recruit;
#   2. recruit_app 계정 생성 및 권한 부여
#      CREATE USER recruit_app WITH PASSWORD 'your_password';
#      GRANT ALL PRIVILEGES ON DATABASE recruit TO recruit_app;
#   3. Airflow 서버에서 PostgreSQL 접속 가능 여부 확인
#      psql -h <POSTGRES_HOST> -p 5432 -U recruit_app -d recruit
#
POSTGRES_HOST=10.149.172.233
POSTGRES_PORT=5432
POSTGRES_DB=sincdb
POSTGRES_USER=dtuser
POSTGRES_PASSWORD=sinc123!

# ============================================================================
# Oracle 데이터베이스 설정 (필수)
# ============================================================================
# Oracle은 ETL 소스 데이터베이스입니다.
# Airflow는 매일 02:30에 Oracle에서 데이터를 추출하여 PostgreSQL로 적재합니다.
#
# 🔧 설정 방법:
#   - ORACLE_HOST: Oracle 서버 IP 주소 (예: 10.0.0.21)
#   - ORACLE_PORT: Oracle 리스너 포트 (기본값: 1521)
#   - ORACLE_SERVICE: Oracle 서비스명 (예: ORCLPDB1, ORCL, XE 등)
#   - ORACLE_USER: Oracle 접속 계정
#   - ORACLE_PASSWORD: Oracle 접속 비밀번호
#
# 📋 사전 준비사항:
#   1. Oracle 계정에 다음 테이블 조회 권한 필요:
#      - HR.EMPLOYEES (직원 정보)
#      - HR.JOBS (직무 정보)
#      - HR.DEPARTMENTS (부서 정보)
#      등 채용 관련 테이블
#   2. Airflow 서버에서 Oracle 접속 가능 여부 확인
#      sqlplus <ORACLE_USER>/<ORACLE_PASSWORD>@<ORACLE_HOST>:<ORACLE_PORT>/<ORACLE_SERVICE>
#   3. 방화벽에서 Oracle 포트(1521) 허용 확인
#
# ⚠️ 주의사항:
#   - Oracle Instant Client 설치 불필요 (python-oracledb Thin Mode 사용)
#   - ORACLE_SERVICE는 SID가 아닌 SERVICE_NAME을 사용
#
ORACLE_HOST=10.253.41.229
ORACLE_PORT=1521
ORACLE_SERVICE=ORCLPDB1
ORACLE_USER=IF_IC0_TEMP_USER
ORACLE_PASSWORD=eykk1275#

# ============================================================================
# 네트워크 및 방화벽 체크리스트
# ============================================================================
# 폐쇄망 환경에서 다음 연결이 가능한지 확인하세요:
#
# 1. Airflow → PostgreSQL 연결:
#    telnet <POSTGRES_HOST> 5432
#
# 2. Airflow → Oracle 연결:
#    telnet <ORACLE_HOST> 1521
#
# 3. 관리자 PC → Airflow 웹 UI 연결:
#    curl http://<Airflow서버IP>:8081/health
#
# ============================================================================

# ============================================================================
# DAG 스케줄 정보 (참고용)
# ============================================================================
# 다음 DAG가 자동으로 실행됩니다:
#
# 1. etl_oracle_to_postgres_recruit_daily
#    - 실행 시간: 매일 02:30 (Asia/Seoul)
#    - 기능: Oracle HR 스키마 데이터를 PostgreSQL로 전체 적재
#    - 전략: Full Reload (stage 테이블 사용)
#    - 데이터 보관: 최근 3년치만 유지
#
# 웹 UI에서 DAG 활성화/비활성화 가능:
#   http://<서버IP>:8081
#
# ============================================================================

# ============================================================================
# 선택 사항 (필요시 설정)
# ============================================================================

# Slack 알림 (선택 사항)
# DAG 실패 시 Slack 알림을 받으려면 Webhook URL 설정
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# 로그 레벨 (선택 사항)
# AIRFLOW__LOGGING__LOGGING_LEVEL=INFO

# ============================================================================
# 사용하지 않는 설정 (폐쇄망 ETL 전용이므로 불필요)
# ============================================================================
# 다음 설정들은 OpenSearch/Vector 검색 기능에서만 사용되므로 설정 불필요:
#   - OPENSEARCH_URL
#   - OPENSEARCH_USER
#   - OPENSEARCH_PASSWORD
#   - LLM8B_URL / LLM70B_URL
#   - VITE_API_BASE
#
# ============================================================================
